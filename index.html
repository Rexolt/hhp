<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Mészáros Bálint | The Void Gallery</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;800&family=Inter:wght@200;400;600&display=swap" rel="stylesheet">
    
    <!-- Libraries -->
    <!-- Main Three.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <!-- Loaders & Post Processing -->
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/GLTFLoader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/RGBELoader.js"></script>
    
    <!-- Post Processing Scripts (Bloom) -->
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/shaders/CopyShader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/shaders/LuminosityHighPassShader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/postprocessing/EffectComposer.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/postprocessing/RenderPass.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/postprocessing/ShaderPass.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/postprocessing/UnrealBloomPass.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/studio-freight/lenis@1.0.29/bundled/lenis.min.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        glass: 'rgba(255, 255, 255, 0.05)',
                        border: 'rgba(255, 255, 255, 0.1)',
                        accent: '#ffffff',
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        serif: ['Cinzel', 'serif'],
                    },
                    backgroundImage: {
                        'gradient-radial': 'radial-gradient(var(--tw-gradient-stops))',
                    }
                }
            }
        }
    </script>

    <style>
        body {
            background-color: #030303;
            color: #ffffff;
            overflow-x: hidden;
            margin: 0;
        }

        /* THREE.JS BACKGROUND */
        #canvas-container {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100vh;
            z-index: 0;
            pointer-events: none;
            opacity: 0; transition: opacity 1.5s ease;
        }

        /* TYPOGRAPHY */
        .watermark {
            position: absolute;
            font-family: 'Cinzel', serif;
            font-weight: 800;
            color: rgba(255,255,255,0.03);
            line-height: 0.8;
            pointer-events: none;
            z-index: -1;
            white-space: nowrap;
        }

        /* GLASS ELEMENTS */
        .glass-box {
            background: rgba(10, 10, 10, 0.4);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-left: 2px solid rgba(255, 255, 255, 0.2);
        }

        /* PROJECT IMAGE */
        .project-card {
            position: relative;
            overflow: hidden;
            transition: transform 0.6s cubic-bezier(0.22, 1, 0.36, 1);
        }
        .project-card:hover img {
            transform: scale(1.1);
        }
        .project-card img {
            transition: transform 0.8s ease;
        }

        /* SIDEBAR NAV (Desktop) */
        .sidebar {
            position: fixed;
            right: 0; top: 0; height: 100vh;
            width: 80px;
            border-left: 1px solid rgba(255,255,255,0.05);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 50;
            background: rgba(0,0,0,0.2);
            backdrop-filter: blur(5px);
        }
        .nav-dot {
            width: 6px; height: 6px;
            background: rgba(255,255,255,0.2);
            border-radius: 50%;
            margin: 20px 0;
            cursor: pointer;
            transition: all 0.3s;
        }
        .nav-dot.active {
            background: white;
            box-shadow: 0 0 10px white;
            transform: scale(1.5);
        }

        /* MOBILE NAV (Bottom Bar) */
        .mobile-nav {
            position: fixed;
            bottom: 0; left: 0; width: 100%;
            background: rgba(0,0,0,0.85);
            backdrop-filter: blur(10px);
            border-top: 1px solid rgba(255,255,255,0.1);
            display: flex;
            justify-content: space-around;
            padding: 15px 0;
            z-index: 60;
        }
        .mobile-nav a {
            color: rgba(255,255,255,0.5);
            text-transform: uppercase;
            font-size: 10px;
            letter-spacing: 2px;
            transition: color 0.3s;
        }
        .mobile-nav a.active-mob {
            color: white;
        }

        /* PROGRESS LINE */
        .progress-line {
            position: fixed; left: 40px; top: 50%; transform: translateY(-50%);
            width: 1px; height: 200px;
            background: rgba(255,255,255,0.1);
            z-index: 50;
        }
        .progress-indicator {
            position: absolute; top: 0; left: -1px;
            width: 3px; height: 0%;
            background: white;
            transition: height 0.1s;
        }

        /* LOADER */
        #loader {
            position: fixed; inset: 0; background: #000; z-index: 100;
            display: flex; flex-col; gap: 1rem; align-items: center; justify-content: center;
            color: white; font-family: 'Cinzel', serif; letter-spacing: 0.2em;
            transition: opacity 0.5s ease;
        }
        .loader-bar {
            width: 100px; height: 1px; background: rgba(255,255,255,0.2);
            position: relative; overflow: hidden;
        }
        .loader-progress {
            position: absolute; left: 0; top: 0; height: 100%; width: 0%;
            background: white; transition: width 0.2s;
        }

    </style>
</head>
<body class="antialiased">

    <!-- LOADER -->
    <div id="loader">
        <div>INITIALIZING VOID...</div>
        <div class="loader-bar"><div class="loader-progress" id="load-bar"></div></div>
    </div>

    <!-- 3D CANVAS -->
    <div id="canvas-container"></div>

    <!-- PROGRESS LINE (LEFT - Desktop Only) -->
    <div class="hidden md:block progress-line">
        <div class="progress-indicator" id="scroll-progress"></div>
        <div class="absolute -left-6 top-0 text-[10px] opacity-30 -rotate-90 origin-center translate-y-[-50%]">START</div>
        <div class="absolute -left-6 bottom-0 text-[10px] opacity-30 -rotate-90 origin-center translate-y-[50%]">END</div>
    </div>

    <!-- SIDEBAR NAV (RIGHT - Desktop Only) -->
    <div class="hidden md:flex sidebar">
        <a href="#hero" class="nav-dot active" data-section="hero"></a>
        <a href="#about" class="nav-dot" data-section="about"></a>
        <a href="#work" class="nav-dot" data-section="work"></a>
        <a href="#contact" class="nav-dot" data-section="contact"></a>
        
        <div class="absolute bottom-10">
            <a href="mailto:hello@balint.com" class="block p-2 opacity-50 hover:opacity-100 transition-opacity">
                <i data-lucide="mail" class="w-5 h-5"></i>
            </a>
        </div>
    </div>

    <!-- MOBILE NAV (Visible only on mobile) -->
    <div class="md:hidden mobile-nav">
        <a href="#hero" class="active-mob">Kezdő</a>
        <a href="#about">Filozófia</a>
        <a href="#work">Munkák</a>
        <a href="#contact">Kapcsolat</a>
    </div>

    <main class="pb-20 md:pb-0"> <!-- Padding bottom for mobile nav -->

        <!-- SECTION 1: HERO (Centered) -->
        <section id="hero" class="h-screen w-full relative flex items-center justify-center overflow-hidden snap-section">
            <div class="watermark text-[20vw] opacity-10" style="top: 20%; left: 50%; transform: translateX(-50%);">SCULPTOR</div>
            
            <div class="relative z-10 text-center mix-blend-difference px-4">
                <p class="font-sans text-xs uppercase tracking-[0.5em] mb-6 opacity-0 animate-in" style="animation-delay: 0.5s">Creative Developer</p>
                <!-- Responsive text size -->
                <h1 class="font-serif text-4xl sm:text-6xl md:text-8xl lg:text-9xl font-bold leading-none mb-2 opacity-0 animate-in" style="animation-delay: 0.7s">
                    MÉSZÁROS BÁLINT
                </h1>
                <div class="w-24 h-[1px] bg-white mx-auto my-8 opacity-0 animate-in" style="animation-delay: 1s"></div>
                <p class="font-sans text-sm md:text-base max-w-md mx-auto opacity-70 leading-relaxed opacity-0 animate-in" style="animation-delay: 1.2s">
                    Innovatív szoftverek és modern weboldalak tervezése.
                </p>
            </div>
        </section>

        <!-- SECTION 2: ABOUT (Text Left, Model Right) -->
        <section id="about" class="min-h-screen w-full relative flex items-center py-16 md:py-24 snap-section">
            <div class="container mx-auto px-6 md:px-24 grid grid-cols-1 md:grid-cols-2 gap-12">
                
                <!-- Left Content -->
                <div class="relative z-10">
                    <span class="font-sans text-xs text-white/40 uppercase tracking-widest mb-4 block">01 // Filozófia</span>
                    
                    <div class="glass-box p-6 md:p-12 max-w-xl opacity-0 scroll-reveal">
                        <h2 class="font-serif text-3xl md:text-5xl mb-8 leading-tight">
                            A kód mint <br> struktúra
                        </h2>
                        <p class="font-sans text-white/70 mb-6 leading-relaxed text-sm md:text-base">
                            Legyen szó komplex matematikai algoritmusokról vagy modern webes interfészekről, a célom mindig ugyanaz: stabil, biztonságos és elegáns rendszereket építeni.
                        </p>
                        <p class="font-sans text-white/70 mb-8 leading-relaxed text-sm md:text-base">
                            A szoftverfejlesztés számomra nem csak funkcionalitás, hanem mérnöki precizitás és felhasználói élmény tökéletes egyensúlya.
                        </p>
                        
                        <div class="flex gap-4 border-t border-white/10 pt-6">
                            <div class="text-center">
                                <span class="block text-2xl font-serif font-bold">10+</span>
                                <span class="text-[10px] uppercase tracking-wider text-white/40">Applikáció</span>
                            </div>
                            <div class="w-[1px] bg-white/10 h-10"></div>
                            <div class="text-center">
                                <span class="block text-2xl font-serif font-bold">Web</span>
                                <span class="text-[10px] uppercase tracking-wider text-white/40">Development</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Right Side reserved for model float -->
                <div class="hidden md:block"></div>
            </div>
            
            <div class="watermark text-[15vw] opacity-5 right-0 bottom-0 rotate-90 origin-bottom-right">GENESIS</div>
        </section>

        <!-- SECTION 3: WORK (Text Right, Model Left) -->
        <section id="work" class="min-h-screen w-full relative flex flex-col justify-center py-16 md:py-24 snap-section">
            <div class="container mx-auto px-6 md:px-24 z-10">
                
                <div class="flex flex-col md:flex-row justify-between items-end mb-16 gap-6">
                    <div>
                        <span class="font-sans text-xs text-white/40 uppercase tracking-widest mb-2 block">02 // Portfólió</span>
                        <h2 class="font-serif text-3xl md:text-6xl">Szoftverek</h2>
                    </div>
                    <div class="text-left md:text-right max-w-xs">
                        <p class="font-sans text-xs text-white/60">
                            Komplex asztali alkalmazások és rendszereszközök.
                        </p>
                    </div>
                </div>

                <!-- Software Projects Grid -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mb-24">
                    
                    <!-- P1: Fxit -->
                    <div class="project-card opacity-0 scroll-reveal">
                        <div class="aspect-[4/5] w-full bg-white/5 relative overflow-hidden glass-box border-none group cursor-pointer">
                            <img src="https://images.unsplash.com/photo-1635070041078-e363dbe005cb?q=80&w=2670&auto=format&fit=crop" class="w-full h-full object-cover" alt="Fxit">
                            <div class="absolute inset-0 bg-black/40 group-hover:bg-transparent transition-colors duration-500"></div>
                            <div class="absolute bottom-0 left-0 w-full p-6 bg-gradient-to-t from-black/90 to-transparent">
                                <h3 class="font-serif text-2xl mb-1 text-white group-hover:text-gray-200 transition-colors">Fxit</h3>
                                <p class="font-sans text-xs text-white/60 uppercase tracking-wider mb-2">Matematikai Függvényábrázoló</p>
                                <div class="flex gap-2">
                                    <span class="px-2 py-1 border border-white/20 text-[10px] uppercase">Kotlin</span>
                                    <span class="px-2 py-1 border border-white/20 text-[10px] uppercase">Java</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- P2: soundR -->
                    <div class="project-card md:translate-y-12 opacity-0 scroll-reveal">
                        <div class="aspect-[4/5] w-full bg-white/5 relative overflow-hidden glass-box border-none group cursor-pointer">
                            <img src="https://images.unsplash.com/photo-1558486012-818198f543e9?q=80&w=2670&auto=format&fit=crop" class="w-full h-full object-cover" alt="soundR">
                            <div class="absolute inset-0 bg-black/40 group-hover:bg-transparent transition-colors duration-500"></div>
                            <div class="absolute bottom-0 left-0 w-full p-6 bg-gradient-to-t from-black/90 to-transparent">
                                <h3 class="font-serif text-2xl mb-1 text-white group-hover:text-gray-200 transition-colors">soundR</h3>
                                <p class="font-sans text-xs text-white/60 uppercase tracking-wider mb-2">Hangtorzító & UI</p>
                                <div class="flex gap-2">
                                    <span class="px-2 py-1 border border-white/20 text-[10px] uppercase">Electron</span>
                                    <span class="px-2 py-1 border border-white/20 text-[10px] uppercase">JS</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- P3: SecureVault -->
                    <div class="project-card opacity-0 scroll-reveal">
                        <div class="aspect-[4/5] w-full bg-white/5 relative overflow-hidden glass-box border-none group cursor-pointer">
                            <img src="https://images.unsplash.com/photo-1555949963-ff9fe0c870eb?q=80&w=2670&auto=format&fit=crop" class="w-full h-full object-cover" alt="SecureVault">
                            <div class="absolute inset-0 bg-black/40 group-hover:bg-transparent transition-colors duration-500"></div>
                            <div class="absolute bottom-0 left-0 w-full p-6 bg-gradient-to-t from-black/90 to-transparent">
                                <h3 class="font-serif text-2xl mb-1 text-white group-hover:text-gray-200 transition-colors">SecureVault</h3>
                                <p class="font-sans text-xs text-white/60 uppercase tracking-wider mb-2">Biztonságos Jelszókezelő</p>
                                <div class="flex gap-2">
                                    <span class="px-2 py-1 border border-white/20 text-[10px] uppercase">Python</span>
                                    <span class="px-2 py-1 border border-white/20 text-[10px] uppercase">Crypto</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- P4: QWENZ-classic -->
                    <div class="project-card opacity-0 scroll-reveal">
                        <div class="aspect-[4/5] w-full bg-white/5 relative overflow-hidden glass-box border-none group cursor-pointer">
                            <img src="https://images.unsplash.com/photo-1550745165-9bc0b252726f?q=80&w=2670&auto=format&fit=crop" class="w-full h-full object-cover" alt="QWENZ">
                            <div class="absolute inset-0 bg-black/40 group-hover:bg-transparent transition-colors duration-500"></div>
                            <div class="absolute bottom-0 left-0 w-full p-6 bg-gradient-to-t from-black/90 to-transparent">
                                <h3 class="font-serif text-2xl mb-1 text-white group-hover:text-gray-200 transition-colors">QWENZ-classic</h3>
                                <p class="font-sans text-xs text-white/60 uppercase tracking-wider mb-2">90's Style Music Player</p>
                                <div class="flex gap-2">
                                    <span class="px-2 py-1 border border-white/20 text-[10px] uppercase">Python</span>
                                    <span class="px-2 py-1 border border-white/20 text-[10px] uppercase">Retro</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- P5: Spoty -->
                    <div class="project-card md:translate-y-12 opacity-0 scroll-reveal">
                        <div class="aspect-[4/5] w-full bg-white/5 relative overflow-hidden glass-box border-none group cursor-pointer">
                            <img src="https://images.unsplash.com/photo-1512418490979-92798cec1380?q=80&w=2670&auto=format&fit=crop" class="w-full h-full object-cover" alt="Spoty">
                            <div class="absolute inset-0 bg-black/40 group-hover:bg-transparent transition-colors duration-500"></div>
                            <div class="absolute bottom-0 left-0 w-full p-6 bg-gradient-to-t from-black/90 to-transparent">
                                <h3 class="font-serif text-2xl mb-1 text-white group-hover:text-gray-200 transition-colors">Spoty</h3>
                                <p class="font-sans text-xs text-white/60 uppercase tracking-wider mb-2">Spotlight Kereső</p>
                                <div class="flex gap-2">
                                    <span class="px-2 py-1 border border-white/20 text-[10px] uppercase">Linux</span>
                                    <span class="px-2 py-1 border border-white/20 text-[10px] uppercase">Windows</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- P6: TotalDNS -->
                    <div class="project-card opacity-0 scroll-reveal">
                        <div class="aspect-[4/5] w-full bg-white/5 relative overflow-hidden glass-box border-none group cursor-pointer">
                            <img src="https://images.unsplash.com/photo-1544197150-b99a580bbc7c?q=80&w=2670&auto=format&fit=crop" class="w-full h-full object-cover" alt="TotalDNS">
                            <div class="absolute inset-0 bg-black/40 group-hover:bg-transparent transition-colors duration-500"></div>
                            <div class="absolute bottom-0 left-0 w-full p-6 bg-gradient-to-t from-black/90 to-transparent">
                                <h3 class="font-serif text-2xl mb-1 text-white group-hover:text-gray-200 transition-colors">TotalDNS</h3>
                                <p class="font-sans text-xs text-white/60 uppercase tracking-wider mb-2">DNS Kezelő</p>
                                <div class="flex gap-2">
                                    <span class="px-2 py-1 border border-white/20 text-[10px] uppercase">Windows</span>
                                    <span class="px-2 py-1 border border-white/20 text-[10px] uppercase">Network</span>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>

                <!-- NEW: WEB PROJECTS SECTION -->
                <div class="mb-8">
                    <h2 class="font-serif text-3xl md:text-5xl mb-8">Web Projektek</h2>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        
                        <!-- Web P1 -->
                        <div class="glass-box p-6 hover:bg-white/5 transition-colors cursor-pointer group opacity-0 scroll-reveal">
                            <div class="h-40 bg-black/50 mb-4 overflow-hidden relative border border-white/10">
                                <img src="https://images.unsplash.com/photo-1460925895917-afdab827c52f?q=80&w=2426&auto=format&fit=crop" class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-500" alt="Web 1">
                            </div>
                            <h3 class="font-serif text-xl mb-2">E-Commerce Platform</h3>
                            <p class="text-xs text-white/60 mb-4">Modern webáruház React alapokon.</p>
                            <span class="text-[10px] border border-white/20 px-2 py-1 uppercase">React / Next.js</span>
                        </div>

                        <!-- Web P2 -->
                        <div class="glass-box p-6 hover:bg-white/5 transition-colors cursor-pointer group opacity-0 scroll-reveal">
                            <div class="h-40 bg-black/50 mb-4 overflow-hidden relative border border-white/10">
                                <img src="https://images.unsplash.com/photo-1522542550221-31fd19575a2d?q=80&w=2670&auto=format&fit=crop" class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-500" alt="Web 2">
                            </div>
                            <h3 class="font-serif text-xl mb-2">Corporate Landing</h3>
                            <p class="text-xs text-white/60 mb-4">Bemutatkozó oldal pénzügyi cégnek.</p>
                            <span class="text-[10px] border border-white/20 px-2 py-1 uppercase">GSAP / HTML</span>
                        </div>

                        <!-- Web P3 -->
                        <div class="glass-box p-6 hover:bg-white/5 transition-colors cursor-pointer group opacity-0 scroll-reveal">
                            <div class="h-40 bg-black/50 mb-4 overflow-hidden relative border border-white/10">
                                <img src="https://images.unsplash.com/photo-1551288049-bebda4e38f71?q=80&w=2670&auto=format&fit=crop" class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-500" alt="Web 3">
                            </div>
                            <h3 class="font-serif text-xl mb-2">Portfolio Dashboard</h3>
                            <p class="text-xs text-white/60 mb-4">Adminisztrációs felület.</p>
                            <span class="text-[10px] border border-white/20 px-2 py-1 uppercase">Vue / Tailwind</span>
                        </div>

                    </div>
                </div>

            </div>
             <div class="watermark text-[12vw] opacity-5 left-0 top-1/2 -translate-y-1/2">EXHIBITION</div>
        </section>

        <!-- SECTION 4: CONTACT (Centered with particles) -->
        <section id="contact" class="h-screen w-full relative flex items-center justify-center snap-section">
            <div class="glass-box p-8 md:p-20 text-center max-w-2xl relative z-10 opacity-0 scroll-reveal border border-white/20 rounded-xl md:rounded-none aspect-auto flex flex-col justify-center">
                <p class="font-sans text-xs uppercase tracking-[0.3em] text-white/40 mb-8">Kapcsolatfelvétel</p>
                <h2 class="font-serif text-4xl md:text-7xl mb-10">Készen állsz?</h2>
                <a href="mailto:hello@balint.com" class="font-serif text-lg md:text-3xl border-b border-white/30 pb-2 hover:text-gray-300 hover:border-white transition-all break-all">
                    hello@balint.com
                </a>
                
                <div class="mt-12 flex justify-center gap-8">
                    <a href="#" class="p-3 border border-white/10 rounded-full hover:bg-white hover:text-black transition-all"><i data-lucide="instagram" class="w-5 h-5"></i></a>
                    <a href="#" class="p-3 border border-white/10 rounded-full hover:bg-white hover:text-black transition-all"><i data-lucide="linkedin" class="w-5 h-5"></i></a>
                    <a href="#" class="p-3 border border-white/10 rounded-full hover:bg-white hover:text-black transition-all"><i data-lucide="github" class="w-5 h-5"></i></a>
                </div>
            </div>
        </section>

    </main>

    <style>
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .animate-in { animation: fadeIn 1s ease forwards; }
    </style>

    <script>
        // --- THREE.JS SETUP WITH OPTIMIZATIONS & PARTICLES ---
        const initThreeJS = () => {
            const container = document.getElementById('canvas-container');
            const scene = new THREE.Scene();
            scene.fog = new THREE.FogExp2(0x000000, 0.002);

            const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            
            // Adjusted camera for mobile
            if (window.innerWidth < 768) {
                camera.position.z = 11; // Further back on mobile
            } else {
                camera.position.z = 6;
            }

            const renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setPixelRatio(Math.min(window.devicePixelRatio, 1.5));
            renderer.shadowMap.enabled = true;
            renderer.shadowMap.type = THREE.PCFSoftShadowMap;
            renderer.toneMapping = THREE.ACESFilmicToneMapping;
            renderer.toneMappingExposure = 1.0;
            container.appendChild(renderer.domElement);

            // --- HDRI ENVIRONMENT ---
            const rgbeLoader = new THREE.RGBELoader();
            rgbeLoader.setDataType(THREE.UnsignedByteType);
            rgbeLoader.load('https://dl.polyhaven.org/file/ph-assets/HDRIs/hdr/1k/royal_esplanade_1k.hdr', function(texture) {
                const pmremGenerator = new THREE.PMREMGenerator(renderer);
                pmremGenerator.compileEquirectangularShader();
                const envMap = pmremGenerator.fromEquirectangular(texture).texture;
                scene.environment = envMap; 
                texture.dispose();
                pmremGenerator.dispose();
            });

            // --- LIGHTING ---
            const ambientLight = new THREE.AmbientLight(0x111111, 0.5);
            scene.add(ambientLight);

            const rimLight = new THREE.SpotLight(0x4488ff, 6);
            rimLight.position.set(-5, 5, -5);
            rimLight.lookAt(0, 0, 0);
            scene.add(rimLight);

            const keyLight = new THREE.PointLight(0xffaa55, 1.5, 20);
            keyLight.position.set(5, 2, 5);
            scene.add(keyLight);

            // --- LOAD MODEL ---
            const loader = new THREE.GLTFLoader();
            let headMesh = null;
            const loaderBar = document.getElementById('load-bar');
            const modelUrl = 'https://raw.githubusercontent.com/mrdoob/three.js/master/examples/models/gltf/LeePerrySmith/LeePerrySmith.glb';

            // Define target color variable for lerping
            let targetColor = new THREE.Color(0xeeeeee);
            let targetRoughness = 0.4;
            let targetMetalness = 0.0;

            loader.load(modelUrl, (gltf) => {
                const mesh = gltf.scene.children[0];
                const geometry = mesh.geometry;
                geometry.center();

                const material = new THREE.MeshPhysicalMaterial({
                    color: 0xeeeeee,
                    metalness: 0.0,
                    roughness: 0.4,
                    clearcoat: 0.1,
                    clearcoatRoughness: 0.4,
                    envMapIntensity: 0.6,
                    side: THREE.DoubleSide
                });

                headMesh = new THREE.Mesh(geometry, material);
                headMesh.castShadow = true;
                headMesh.receiveShadow = true;
                headMesh.scale.set(0.6, 0.6, 0.6);
                scene.add(headMesh);

                document.getElementById('canvas-container').style.opacity = 1;
                document.getElementById('loader').style.opacity = 0;
                setTimeout(() => document.getElementById('loader').style.display = 'none', 500);

            }, (xhr) => {
                const percent = (xhr.loaded / xhr.total) * 100;
                if(loaderBar) loaderBar.style.width = percent + '%';
            });

            // --- PARTICLES (Starfield/Dust) ---
            const particleCount = 200;
            const particlesGeometry = new THREE.BufferGeometry();
            const particlesPositions = new Float32Array(particleCount * 3);

            for (let i = 0; i < particleCount; i++) {
                const i3 = i * 3;
                particlesPositions[i3] = (Math.random() - 0.5) * 20; 
                particlesPositions[i3 + 1] = (Math.random() - 0.5) * 20; 
                particlesPositions[i3 + 2] = (Math.random() - 0.5) * 10 - 5; 
            }

            particlesGeometry.setAttribute('position', new THREE.BufferAttribute(particlesPositions, 3));
            const particlesMaterial = new THREE.PointsMaterial({
                color: 0xffffff,
                size: 0.03,
                transparent: true,
                opacity: 0.4
            });
            const particleSystem = new THREE.Points(particlesGeometry, particlesMaterial);
            scene.add(particleSystem);


            // --- POST PROCESSING ---
            const renderScene = new THREE.RenderPass(scene, camera);
            const bloomPass = new THREE.UnrealBloomPass(new THREE.Vector2(window.innerWidth, window.innerHeight), 1.5, 0.4, 0.85);
            bloomPass.threshold = 0.3;
            bloomPass.strength = 0.3;
            bloomPass.radius = 0.2;

            const composer = new THREE.EffectComposer(renderer);
            composer.addPass(renderScene);
            composer.addPass(bloomPass);


            // --- ANIMATION VARIABLES ---
            let mouseX = 0;
            let mouseY = 0;
            let targetX = 0; 
            let currentX = 0; 
            let scrollY = 0;

            window.addEventListener('scroll', () => {
                scrollY = window.scrollY;
                const h = window.innerHeight;
                const totalH = document.body.scrollHeight - window.innerHeight;
                const scrollPct = scrollY / totalH;
                
                const moveRange = window.innerWidth < 768 ? 1.5 : 2.5;

                // Position Logic
                if (scrollY < h * 0.5) {
                    targetX = 0;
                } else if (scrollY < h * 1.5) {
                    targetX = moveRange; 
                } else if (scrollY < h * 2.5) {
                    targetX = -moveRange; 
                } else {
                    targetX = 0;
                }

                // --- DYNAMIC MATERIAL LOGIC ---
                if (scrollPct < 0.33) {
                    // Start: White Marble (Hero) -> Blue Tech (About)
                    const t = scrollPct / 0.33;
                    targetColor.setHex(0xeeeeee).lerp(new THREE.Color(0x3b82f6), t); // To Blue
                    targetRoughness = 0.4 - (t * 0.2); // Becomes slightly shinier
                    targetMetalness = t * 0.2; // Slightly metallic
                } else if (scrollPct < 0.66) {
                    // Mid: Blue Tech -> Neon Purple (Work)
                    const t = (scrollPct - 0.33) / 0.33;
                    targetColor.setHex(0x3b82f6).lerp(new THREE.Color(0xa855f7), t); // To Purple
                    targetRoughness = 0.2 - (t * 0.1); // Shinier
                    targetMetalness = 0.2 + (t * 0.3); // More metal
                } else {
                    // End: Neon Purple -> Dark Chrome (Contact)
                    const t = (scrollPct - 0.66) / 0.34;
                    targetColor.setHex(0xa855f7).lerp(new THREE.Color(0x222222), t); // To Dark Grey
                    targetRoughness = 0.1 - (t * 0.1); // Almost mirror
                    targetMetalness = 0.5 + (t * 0.5); // Full metal
                }

                const progressEl = document.getElementById('scroll-progress');
                if(progressEl) progressEl.style.height = (scrollY / totalH) * 100 + '%';
            });

            // Touch support
            document.addEventListener('touchmove', (e) => {
                if(e.touches.length > 0) {
                    const touch = e.touches[0];
                    mouseX = (touch.clientX - window.innerWidth / 2) * 0.0005;
                    mouseY = (touch.clientY - window.innerHeight / 2) * 0.0005;
                }
            }, { passive: true });

            document.addEventListener('mousemove', (e) => {
                mouseX = (e.clientX - window.innerWidth / 2) * 0.0005;
                mouseY = (e.clientY - window.innerHeight / 2) * 0.0005;
            });

            const clock = new THREE.Clock();

            const animate = () => {
                requestAnimationFrame(animate);
                const time = clock.getElapsedTime();
                
                if (headMesh) {
                    // Position Lerp
                    currentX += (targetX - currentX) * 0.05;
                    headMesh.position.x = currentX;
                    headMesh.rotation.y = mouseX + (time * 0.1); 
                    headMesh.rotation.x = mouseY * 0.5;
                    headMesh.position.y = Math.sin(time * 0.5) * 0.1;

                    // Material Lerp
                    headMesh.material.color.lerp(targetColor, 0.05);
                    headMesh.material.roughness += (targetRoughness - headMesh.material.roughness) * 0.05;
                    headMesh.material.metalness += (targetMetalness - headMesh.material.metalness) * 0.05;
                }

                if (particleSystem) {
                    particleSystem.rotation.y = time * 0.05;
                    particleSystem.rotation.x = time * 0.02;
                }
                
                composer.render();
            };
            animate();

            window.addEventListener('resize', () => {
                const width = window.innerWidth;
                const height = window.innerHeight;
                
                camera.aspect = width / height;
                camera.updateProjectionMatrix();
                
                if (width < 768) {
                    camera.position.z = 11;
                } else {
                    camera.position.z = 6;
                }

                renderer.setSize(width, height);
                composer.setSize(width, height);
            });
        };

        initThreeJS();

        // --- LENIS SCROLL ---
        const lenis = new Lenis({
            duration: 1.5,
            easing: (t) => Math.min(1, 1.001 - Math.pow(2, -10 * t)),
            direction: 'vertical',
            smooth: true,
        });
        function raf(time) {
            lenis.raf(time);
            requestAnimationFrame(raf);
        }
        requestAnimationFrame(raf);

        // --- GSAP REVEALS ---
        gsap.registerPlugin(ScrollTrigger);

        const revealElements = document.querySelectorAll('.scroll-reveal');
        revealElements.forEach(el => {
            gsap.fromTo(el, 
                { y: 50, opacity: 0 },
                {
                    y: 0, opacity: 1, duration: 1, ease: 'power3.out',
                    scrollTrigger: {
                        trigger: el,
                        start: "top 85%",
                    }
                }
            );
        });

        // --- NAV HIGHLIGHT ---
        const sections = document.querySelectorAll('section');
        const navDots = document.querySelectorAll('.nav-dot');
        const mobileLinks = document.querySelectorAll('.mobile-nav a');

        window.addEventListener('scroll', () => {
            let current = '';
            sections.forEach(section => {
                const sectionTop = section.offsetTop;
                if (scrollY >= sectionTop - 200) {
                    current = section.getAttribute('id');
                }
            });

            navDots.forEach(dot => {
                dot.classList.remove('active');
                if (dot.getAttribute('data-section') === current) {
                    dot.classList.add('active');
                }
            });

            // Mobile nav highlight
            mobileLinks.forEach(link => {
                link.classList.remove('active-mob');
                if(link.getAttribute('href') === '#' + current) {
                    link.classList.add('active-mob');
                }
            });
        });

        lucide.createIcons();

    </script>
</body>
</html>
